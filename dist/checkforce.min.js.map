{"version":3,"file":"checkforce.min.js","mappings":"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","sources":["webpack://CheckForce/webpack/universalModuleDefinition","webpack://CheckForce/external umd \"Popper\"","webpack://CheckForce/external umd \"zxcvbn\"","webpack://CheckForce/webpack/bootstrap","webpack://CheckForce/webpack/runtime/compat get default export","webpack://CheckForce/webpack/runtime/define property getters","webpack://CheckForce/webpack/runtime/hasOwnProperty shorthand","webpack://CheckForce/./src/helpers.js","webpack://CheckForce/./src/index.js","webpack://CheckForce/./src/wrapper.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"Popper\"), require(\"zxcvbn\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"Popper\", \"zxcvbn\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"CheckForce\"] = factory(require(\"Popper\"), require(\"zxcvbn\"));\n\telse\n\t\troot[\"CheckForce\"] = factory(root[\"Popper\"], root[\"zxcvbn\"]);\n})(self, function(__WEBPACK_EXTERNAL_MODULE__830__, __WEBPACK_EXTERNAL_MODULE__690__) {\nreturn ","module.exports = __WEBPACK_EXTERNAL_MODULE__830__;","module.exports = __WEBPACK_EXTERNAL_MODULE__690__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","/**\n * querySelector wrapper\n *\n * @param {String} selector Selector to query\n * @param {Element} [scope] Optional scope element for the selector\n */\nexport const qs = (selector, scope) => {\n  return (scope || document).querySelector(selector);\n}\n\n/**\n * addEventListener wrapper\n *\n * @param {Element|Window} target Target Element\n * @param {string} type Event name to bind to\n * @param {Function} callback Event callback\n * @param {boolean} [capture] Capture the event\n */\nexport function $on(target, type, callback, capture) {\n\ttarget.addEventListener(type, callback, !!capture);\n}\n","/**\n * checkforce.js\n *\n * @author Jaime Neves <https://github.com/dejaneves>\n * @license MIT\n */\nimport * as Popper from '@popperjs/core'\nimport zxcvbn from 'zxcvbn'\nimport { PwdStrengthWrapper } from './wrapper'\nimport { qs, $on } from './helpers'\n\nconst isRTL = () => document.documentElement.dir === 'rtl'\n\nconst AttachmentMap = {\n  AUTO: 'auto',\n  TOP: 'top',\n  RIGHT: isRTL() ? 'left' : 'right',\n  BOTTOM: 'bottom',\n  LEFT: isRTL() ? 'right' : 'left'\n}\n\nconst Default = {\n  containerId: 'checkforce-tooltip',\n  elementProgress: 'checkforce-progress',\n  elementProgressText: 'checkforce-progress-title',\n  minPasswordLength: 8,\n  placement: 'top',\n  template: `\n  <div id=\"arrow\" data-popper-arrow></div>\n  <div class=\"checkforce-popover\">\n    <div class=\"checkforce-popover-body\">\n      <div class=\"checkforce-popover-title\">Nível de segurança</div>\n      <div class=\"checkforce-progress\">\n        <div class=\"checkforce-progress-title\">Nenhum</div>\n        <div class=\"checkforce-progress-level\">\n          <div class=\"checkforce-progress-bar progress-bar--danger\" style=\"width: 29%\"></div>\n          <div class=\"checkforce-progress-bar progress-bar--warning\" style=\"width: 29%\"></div>\n          <div class=\"checkforce-progress-bar progress-bar--success\" style=\"width: 29%\"></div>\n        </div>\n      </div>\n    </div>\n  </div>\n  `,\n  trigger: {\n    selector: '',\n    eventListener: ['keyup']\n  }\n}\n\nexport default class CheckForce {\n  constructor(element, config) {\n    if (typeof Popper === 'undefined') {\n      throw new TypeError('CheckForce require Popper (https://popper.js.org)');\n    }\n\n    if (typeof zxcvbn === 'undefined') {\n      throw new TypeError('CheckForce require zxcvbn (https://github.com/dropbox/zxcvbn)');\n    }\n\n    if(!element) {\n      throw new Error('Missing input argument')\n    }\n\n    this.eventList = [];\n\n    this._element = this._getElement(element);\n    this._popper = null;\n    this._wrapper = null;\n    this._config = this._getConfig(config);\n\n    this.resolveOptions();\n  }\n\n  static get Default() {\n    return Default\n  }\n\n  resolveOptions() {\n    if(!this._element || !this._element.nodeType) {\n      throw new Error('Trigger must be a HTML element');\n    }\n\n    this._wrapper = PwdStrengthWrapper(this.constructor.Default);\n    this.bindEvents();\n  }\n\n  bindEvents() {\n    const hideEvents = ['blur'];\n\n    $on(this._element, 'focus', ({currentTarget}) => {\n      this.show(currentTarget)\n    });\n\n    hideEvents.forEach((eventType) => {\n      this._element.addEventListener(eventType, (event) => {\n        this.hide()\n      }, false);\n    });\n\n    this._element.addEventListener('keyup', (event) => {\n      this.checkPassword(event)\n    }, false);\n  }\n\n  checkPassword(event) {\n    if (event.keyCode === 32 || event.which === 32) {\n      event.preventDefault();\n      return;\n    }\n\n    const target = event.currentTarget;\n    const value  = target.value;\n\n    const container = target.parentNode.querySelector(`#${this._getContainerId()}`);\n    const text = container.querySelector(`.${this._config.elementProgressText}`);\n    let result = { str: {}, pwd: {} };\n\n    if(value) {\n      result.str = this._checkString(value);\n      result.pwd = zxcvbn(value);\n      result.pwd.highLevelSecurity = true;\n\n      // weak password\n      if( (result.pwd.score === 0 || result.pwd.score === 1) ||\n        result.pwd.score === 2 && parseInt(result.pwd.guesses_log10) < 8) {\n        text.innerHTML = \"Fraca\";\n        result.pwd.highLevelSecurity = false;\n      }\n\n      // medium password\n      if( (result.pwd.score === 2 &&\n        parseInt(result.pwd.guesses_log10) >= 8) ||\n        result.pwd.score === 3) {\n        text.innerHTML = \"Médio\";\n      }\n\n      // strong password\n      if(result.pwd.score === 4) {\n        text.innerHTML = \"Forte\";\n      }\n\n      this._runWrapper(container, result);\n    } else {\n      text.innerHTML = \"Nenhum\";\n      result.pwd.score = -1;\n      this._runWrapper(container, result);\n    }\n  }\n\n  hide() {\n    qs(`#${this._getContainerId()}`).removeAttribute('data-show');\n  }\n\n  show(target) {\n    const parentNode = target.parentNode;\n    const placement = typeof this._config.placement === 'string' ?\n      this._config.placement :\n      this.constructor.Default['placement'];\n\n    const attachment = this._getAttachment(placement);\n\n    let container = parentNode.querySelector(`#${this._getContainerId()}`);\n\n    if(!container) {\n      container = document.createElement('div');\n      container.innerHTML = this._config.template;\n      container.setAttribute('id', this._getContainerId());\n      container.setAttribute('role', 'tooltip');\n      container.setAttribute('data-show', '');\n\n      parentNode.insertBefore(container, target.nextSibling);\n    } else {\n      container.setAttribute('data-show', '');\n    }\n\n    if (this._popper) {\n      this._popper.update()\n    } else {\n      this._popper = Popper.createPopper(this._element, container, this._getPopperConfig(attachment))\n    }\n  }\n\n  _getContainerId() {\n    return this.constructor.Default['containerId']\n  }\n\n  _getElement(element) {\n    return typeof element === 'string' ? qs(element) : element;\n  }\n\n  _getAttachment(placement) {\n    return AttachmentMap[placement.toUpperCase()]\n  }\n\n  _getPopperConfig(attachment) {\n    const defaultPopperConfig = {\n      placement: attachment,\n      modifiers: [\n        {\n          name: 'offset',\n          options: {\n            offset: [0, 8],\n          },\n        },\n      ]\n    }\n\n    return defaultPopperConfig;\n  }\n\n  _getConfig(config) {\n    config = {\n      ...this.constructor.Default,\n      ...(typeof config === 'object' && config ? config : {})\n    }\n\n    return config\n  }\n\n  /**\n   * @param {HTMLElement} container\n   * @param {Object} result\n   */\n   _runWrapper(container, result) {\n    const progressBox = qs(`.${this.constructor.Default['elementProgress']}`, container);\n\n    this._wrapper.setData(container, result);\n    this._wrapper.progress(progressBox);\n  }\n\n  /**\n   * @param {String} str\n   */\n   _checkString(str) {\n    var lowerCaseRegex = RegExp('(?=.*[a-z])');\n    var upperCaseRegex = RegExp('(?=.*[A-Z])');\n    var digitRegex = RegExp('(?=.*\\\\d)');\n    var lowerCaseFlag = lowerCaseRegex.test(str);\n    var upperCaseFlag = upperCaseRegex.test(str);\n    var digitFlag = digitRegex.test(str);\n    var lengthFlag = str.length >= this.constructor.Default['minPasswordLength'];\n\n    return { lowerCaseFlag, upperCaseFlag, digitFlag, lengthFlag };\n  }\n}","export function PwdStrengthWrapper(options) {\n\n  const defaults = {\n    res: {},\n    container: '',\n    progressStatus: ['success', 'warning', 'danger']\n  };\n\n  if (typeof options === 'object') {\n    options = Object.assign({}, defaults, options);\n  } else {\n    options = defaults;\n  }\n\n  const setData = (container, res) => {\n    options.container = container;\n    options.res = res;\n  };\n\n  /**\n   * @param {HTMLElement} box \n   */\n  const progress = box => {\n\n    if(!box) throw 'No HTML container'\n\n    if(options.res.pwd.score === 0 || options.res.pwd.score == 1 ||\n      (options.res.pwd.score === 2 && !options.res.pwd.highLevelSecurity)) {\n      progressClasses('danger', box);\n    }\n\n    if((options.res.pwd.score === 2 && options.res.pwd.highLevelSecurity) ||\n      options.res.pwd.score === 3) {\n      progressClasses('warning', box);\n    }\n\n    if(options.res.pwd.score === 4) {\n      progressClasses('success', box);\n    }\n\n    if(options.res.pwd.score === -1) {\n      progressClasses(null, box);\n    }\n  };\n\n  const progressClasses = (classType, box) => {\n    const classes = options.progressStatus;\n\n    box.classList.remove(...classes);\n\n    if(classType) {\n      box.classList.add(`${classType}`);\n    }\n  };\n\n  return { progress, setData };\n}\n"],"names":["root","factory","exports","module","require","define","amd","self","__WEBPACK_EXTERNAL_MODULE__830__","__WEBPACK_EXTERNAL_MODULE__690__","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","n","getter","__esModule","d","a","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","qs","selector","scope","document","querySelector","isRTL","documentElement","dir","AttachmentMap","AUTO","TOP","RIGHT","BOTTOM","LEFT","Default","containerId","elementProgress","elementProgressText","minPasswordLength","placement","template","trigger","eventListener","CheckForce","element","config","Popper","TypeError","zxcvbn","Error","this","eventList","_element","_getElement","_popper","_wrapper","_config","_getConfig","resolveOptions","nodeType","options","defaults","res","container","progressStatus","assign","progressClasses","classType","box","classes","classList","remove","add","progress","pwd","score","highLevelSecurity","setData","PwdStrengthWrapper","constructor","bindEvents","callback","currentTarget","show","addEventListener","forEach","eventType","event","hide","checkPassword","keyCode","which","target","value","parentNode","_getContainerId","text","result","str","_checkString","parseInt","guesses_log10","innerHTML","_runWrapper","preventDefault","removeAttribute","attachment","_getAttachment","setAttribute","createElement","insertBefore","nextSibling","update","_getPopperConfig","toUpperCase","modifiers","name","offset","progressBox","lowerCaseRegex","RegExp","upperCaseRegex","digitRegex","lowerCaseFlag","test","upperCaseFlag","digitFlag","lengthFlag","length"],"sourceRoot":""}